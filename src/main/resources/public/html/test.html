<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <style type="text/css">
        .calculator{
            width: 500px;
            height: 150px;
            position: absolute;
            z-index: 500;
            box-shadow: 0px 0px 5px #2B2B2B;
        }

        .calculator .title{
            height: 30px;
            background-color: #F2F2F2;
            line-height: 30px;
            font-size: 15px;
            color: #2B2B2B;
            border-bottom: 1px solid #CFCFCF;
        }

        .calculator .title span{
            margin-left: 20px;
        }

        .calculator .title>div{
            width: 30px;
            height: 25px;
            float: right;
            line-height: 23px;
            font-size: 16px;
            text-align: center;
        }

        .calculator input[type="number"] , .calculator select[class="computation"]{
            width: 180px;
            height: 30px;
            border-radius: 2px;
            border: 1px solid #2B2B2B;
        }

        .calculator select[class="computation"]{
            width: 40px;
            font-size: 20px;
        }

        .calculator .calculate{
            width: 414px;
            margin: 0 auto;
        }
        .calculator .calculate>div{
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <div class="title">
            <span>计算器</span>
            <div class="closeDiv">
                <i class="fa fa-times" aria-hidden="true"></i>
            </div>
        </div>
        <div class="calculate">
            <div>
                <input type="number" class="num1">
                <select class="computation">
                    <option value="+">+</option>
                    <option value="-">-</option>
                    <option value="*">*</option>
                    <option value="/">/</option>
                </select>
                <input type="number" class="num2">
                <p class="result">0</p>
            </div>
        </div>
    </div>
</body>


<script type="text/javascript">
    $(function () {

        $('.calculator .title .closeDiv').mouseenter(function(){
            $(this).css({
                'background-color':'#E81123'
            })
            $(this).children('i').css({
                'color':'#FFFFFF'
            });
        });

        $('.calculator .title .closeDiv').mouseleave(function(){
            $(this).removeAttr('style');
            $(this).children('i').removeAttr('style');
        });

        $('.calculator .title .closeDiv').click(function(){
            $('.calculator').hide();
        });

        $('input[type="number"]').bind('input propertychange',function () {
            calculate();
        });

        $('select[class="computation"]').bind('input propertychange',function () {
            calculate();
        });



        var $x = 0;
        var $y = 0;
        var x_ = 0;
        var y_ = 0;
        var x = 0;
        var y = 0;
        $('.calculator .title').mousedown(function (e) {
            $x = $('.calculator').offset().left;
            $y = $('.calculator').offset().top;

            var _x = e.originalEvent.x || e.originalEvent.layerX || 0;
            var _y = e.originalEvent.y || e.originalEvent.layerY || 0;

            x_ = _x - $x;
            y_ = _y - $y;

            $('.calculator .title').mousemove(function (ev) {
                x = ev.originalEvent.x || ev.originalEvent.layerX || 0;
                y = ev.originalEvent.y || ev.originalEvent.layerY || 0;

                $('.calculator').css({
                    'top': y - y_,
                    'left': x - x_
                });
            });
        });


        $('.calculator .title').mouseup(function (e) {
            $('.calculator .title').unbind('mousemove');
        });



        function calculate() {
            var n1 = $('.num1').val();
            var n2 = $('.num2').val();
            var c = $('.computation').val();
            var r = 0;
            n1 = ('' == n1 ? 0 : n1);
            n2 = ('' == n2 ? 0 : n2);
            switch (c) {
                case '+':
                    r = parseFloat(n1) + parseFloat(n2);
                    break;
                case '-':
                    r = parseFloat(n1) - parseFloat(n2);
                    break;
                case '*':
                    r = parseFloat(n1) * parseFloat(n2);
                    break;
                case '/':
                    if(0 == n2){
                        r = 0;
                        alert('被除数不能为0');
                    }else{
                        r = parseFloat(n1) / parseFloat(n2);
                    }
                    break;
                default:
                    break;
            }

            $('.result').text(r);
        }
    });
</script>
</html>